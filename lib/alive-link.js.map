{"version":3,"file":"alive-link.js","names":["_path","require","_url","_interopRequireDefault","_promises","_textlintRuleHelper","_nodeFetch","_minimatch","_pMemoize","_pQueue","obj","__esModule","default","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","res","call","TypeError","Number","DEFAULT_OPTIONS","checkRelative","baseURI","ignore","ignoreRedirects","ignoreStringLinks","preferGET","retry","concurrency","interval","intervalCap","userAgent","maxRetryDelay","maxRetryAfterDelay","URI_REGEXP","STATUS_CODE","NOT_ALLOWED","REDIRECT","getURLOrigin","urlString","URL","parse","protocol","hostname","concat","port","isHttp","uri","isRelative","host","isLocal","isAbsolute","isRedirect","code","includes","isIgnored","some","pattern","minimatch","checkProtocol","test","joinPath","pathList","list","map","path","index","temp","slice","result","Boolean","join","startsWith","waitTimeMs","ms","setTimeout","createFetchWithRuleDefaults","ruleOptions","fetchOptions","fetch","compress","headers","Accept","Host","createCheckAliveURL","fetchWithDefaults","_isAliveURI","method","maxRetryCount","currentRetryCount","opts","redirect","status","redirectedUrl","get","ok","redirected","redirectTo","message","statusText","finalRes","hash","url","delayMs","retryAfter","retryAfterMs","maxRetryAfterDelayMs","Math","min","retryWaitTimeMs","maxRetryDelayMs","isAliveURI","ex","_x","isAliveLocalFile","_x2","_isAliveLocalFile","filePath","fs","access","replace","reporter","context","options","Syntax","getSource","report","RuleError","fixer","getFilePath","locator","helper","RuleHelper","origin","memorizedIsAliveURI","pMemoize","maxAge","lint","_ref2","_ref","node","URIRange","newURI","base","padding","range","lintMessage","fix","replaceTextRange","_x3","_x4","URIs","Str","isChildNode","BlockQuote","Link","Image","text","matches","matchAll","Array","from","match","raw","indexOf","Definition","indexOfUrl","DocumentExit","queue","PQueue","linkTasks","item","addAll","_default","linter","exports"],"sources":["../src/alive-link.js"],"sourcesContent":["import { isAbsolute } from 'path'\nimport URL from 'url'\nimport fs from 'fs/promises'\n\nimport { RuleHelper } from 'textlint-rule-helper'\nimport fetch from 'node-fetch'\nimport minimatch from 'minimatch'\nimport pMemoize from 'p-memoize'\nimport PQueue from 'p-queue'\n\nconst DEFAULT_OPTIONS = {\n  checkRelative: true, // {boolean} `false` disables the checks for relative URIs.\n  baseURI: null, // {String|null} a base URI to resolve relative URIs.\n  ignore: [], // {Array<String>} URIs to be skipped from availability checks.\n  ignoreRedirects: false, // {boolean} `false` ignores redirect status codes.\n  ignoreStringLinks: false, // {boolean} `false` skip URI_REGEXP checking in string.\n  preferGET: [], // {Array<String>} origins to prefer GET over HEAD.\n  retry: 3, // {number} Max retry count\n  concurrency: 8, // {number} Concurrency count of linting link [Experimental]\n  interval: 500, // The length of time in milliseconds before the interval count resets. Must be finite. [Experimental]\n  intervalCap: 8, // The max number of runs in the given interval of time. [Experimental]\n  userAgent: 'textlint-rule-alive-link/0.1', // {String} a UserAgent,\n  maxRetryDelay: 10, // (number) The max of waiting seconds for retry. It is related to `retry` option. It does affect to `Retry-After` header.\n  maxRetryAfterDelay: 10, // (number) The max of waiting seconds for `Retry-After` header.\n}\n\nconst URI_REGEXP = /(?:https?:)?\\/\\/(?:www\\.)?[-a-z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-\\p{L}0-9()@:%_+.~#?&/=]*)/gu\n\nconst STATUS_CODE = {\n  NOT_ALLOWED: 405,\n  REDIRECT: [301, 302, 303, 307, 308],\n}\n\n/**\n * Return URL origin string from `urlString`.\n * If origin is not found, return null\n * @param {string} urlString\n * @returns {string | null}\n * @see https://url.spec.whatwg.org/#origin\n */\nfunction getURLOrigin(urlString) {\n  if (!urlString) {\n    return null\n  }\n  const obj = URL.parse(urlString)\n  if (!obj.protocol && !obj.hostname) {\n    return null\n  }\n  return `${obj.protocol}//${obj.hostname}${obj.port ? `:${obj.port}` : ''}`\n}\n\n/**\n * Returns `true` if a given URI is https? url.\n * @param {string} uri\n * @return {boolean}\n */\nfunction isHttp(uri) {\n  const { protocol } = URL.parse(uri)\n  return protocol === 'http:' || protocol === 'https:'\n}\n\n/**\n * Returns `true` if a given URI is relative.\n * @param {string} uri\n * @return {boolean}\n * @see https://github.com/panosoft/is-local-path\n */\nfunction isRelative(uri) {\n  const { host } = URL.parse(uri)\n  return host === null || host === ''\n}\n\n/**\n * Returns if a given URI indicates a local file.\n * @param {string} uri\n * @return {boolean}\n * @see https://nodejs.org/api/path.html#path_path_isabsolute_path\n */\nfunction isLocal(uri) {\n  if (isAbsolute(uri)) {\n    return true\n  }\n  return isRelative(uri)\n}\n\n/**\n * Return `true` if the `code` is redirect status code.\n * @see https://fetch.spec.whatwg.org/#redirect-status\n * @param {number} code\n * @returns {boolean}\n */\nfunction isRedirect(code) {\n  return STATUS_CODE.REDIRECT.includes(code)\n}\n\nfunction isIgnored(uri, ignore = []) {\n  return ignore.some((pattern) => minimatch(uri, pattern))\n}\n\n/**\n * Check if URI have protocol\n * @description Some URIs' protocol in HTML is removed. Like: //google.com instead of https://google.com\n * @param {string} uri\n * @return {boolean}\n */\nfunction checkProtocol(uri) {\n  return /^\\/\\//.test(uri)\n}\n\n/**\n * Join multiple path\n * @param {[string]} pathList\n * @return {string}\n */\nfunction joinPath(pathList) {\n  const list = pathList.map((path, index) => {\n    let temp = path\n    if (!path) {\n      return ''\n    }\n    // Remove tail '/'\n    if (path[path.length - 1] === '/') {\n      temp = temp.slice(0, -1)\n    }\n    // remove head '/', except first path\n    if (index > 0 && path[0] === '/') {\n      temp = temp.slice(1)\n    }\n    return temp\n  })\n\n  const result = list.filter(Boolean).join('/')\n  if (result.startsWith('http')) {\n    return result\n  }\n  return result\n}\n\n/**\n * wait for ms and resolve the promise\n * @param ms\n * @returns {Promise<any>}\n */\nfunction waitTimeMs(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms)\n  })\n}\n\nconst createFetchWithRuleDefaults = (ruleOptions) => {\n  return (uri, fetchOptions) => {\n    const { host } = URL.parse(uri)\n    return fetch(uri, {\n      ...fetchOptions,\n      // Disable gzip compression in Node.js\n      // to avoid the zlib's \"unexpected end of file\" error\n      // https://github.com/request/request/issues/2045\n      compress: false,\n      // Some website require UserAgent and Accept header\n      // to avoid ECONNRESET error\n      headers: {\n        'User-Agent': ruleOptions.userAgent,\n        Accept: '*/*',\n        // avoid assign null to Host\n        ...(host\n          ? {\n            // Same host for target url\n            Host: host,\n          }\n          : {}),\n      },\n    })\n  }\n}\n\n/**\n * Create isAliveURI function with ruleOptions\n * @param {object} ruleOptions\n * @returns {function}\n */\nconst createCheckAliveURL = (ruleOptions) => {\n  // Create fetch function for this rule\n  const fetchWithDefaults = createFetchWithRuleDefaults(ruleOptions)\n  /**\n   * Checks if a given URI is alive or not.\n   *\n   * Normally, this method following strategiry about retry\n   *\n   * 1. Head\n   * 2. Get\n   * 3. Get\n   *\n   * @param {string} uri\n   * @param {string} method\n   * @param {number} maxRetryCount\n   * @param {number} currentRetryCount\n   * @return {{ ok: boolean, redirect?: string, message: string }}\n   */\n  return async function isAliveURI(\n    uri,\n    method = 'HEAD',\n    maxRetryCount = 3,\n    currentRetryCount = 0,\n  ) {\n    const opts = {\n      method,\n      // Use `manual` redirect behaviour to get HTTP redirect status code\n      // and see what kind of redirect is occurring\n      redirect: 'manual',\n    }\n    try {\n      const res = await fetchWithDefaults(uri, opts)\n      // Redirected\n      if (isRedirect(res.status)) {\n        const redirectedUrl = res.headers.get('Location')\n        // Status code is 301 or 302, but Location header is not set\n        if (redirectedUrl === null) {\n          return {\n            ok: false,\n            redirected: true,\n            redirectTo: null,\n            message: `${res.status} ${res.statusText}`,\n          }\n        }\n        const finalRes = await fetchWithDefaults(redirectedUrl, { ...opts, redirect: 'follow' })\n        const { hash } = URL.parse(uri)\n        return {\n          ok: finalRes.ok,\n          redirected: true,\n          redirectTo: hash !== null ? `${finalRes.url}${hash}` : finalRes.url,\n          message: `${res.status} ${res.statusText}`,\n        }\n      }\n\n      // Return directly if true\n      if (res.ok) {\n        return {\n          ok: true,\n          message: 'OK',\n        }\n      }\n\n      // Retry available\n      if (currentRetryCount < maxRetryCount) {\n        // If current method is not allowed, switch to the allowed method\n        if (res.status === STATUS_CODE.NOT_ALLOWED) {\n          method = res.headers.get('Allow') || 'GET'\n        } else {\n          // Retry using 'GET' method if it is not ok when use 'HEAD' method\n          method = 'GET'\n        }\n\n        let delayMs = 0\n        // Try to fetch again if not reach max retry count\n        const retryAfter = res.headers.get('Retry-After')\n        // The response `Retry-After` header has a higher priority\n        // e.g. `Retry-After: 60` and `maxRetryAfterDelay: 90`, wait 60 seconds\n        if (retryAfter) {\n          const retryAfterMs = Number(retryAfter) * 1000\n          const maxRetryAfterDelayMs = ruleOptions.maxRetryAfterDelay * 1000\n          delayMs = Math.min(retryAfterMs, maxRetryAfterDelayMs)\n        } else {\n          // exponential retry: 0ms -> 100ms -> 200ms -> 400ms -> 800ms ...\n          const retryWaitTimeMs = currentRetryCount ** 2 * 100\n          const maxRetryDelayMs = ruleOptions.maxRetryDelay * 1000\n\n          delayMs = Math.min(retryWaitTimeMs, maxRetryDelayMs)\n        }\n        if (delayMs > 0) {\n          // Retry delay\n          await waitTimeMs(delayMs)\n        }\n        return isAliveURI(uri, method, maxRetryCount, currentRetryCount + 1)\n      }\n\n      return {\n        ok: false,\n        message: `${res.status} ${res.statusText}`,\n      }\n    } catch (ex) {\n      // Retry with `GET` method if the request failed\n      // as some servers don't accept `HEAD` requests but are OK with `GET` requests.\n      if (method === 'HEAD' && currentRetryCount < maxRetryCount) {\n        return isAliveURI(uri, 'GET', maxRetryCount, currentRetryCount + 1)\n      }\n\n      return {\n        ok: false,\n        message: ex.message,\n      }\n    }\n  }\n}\n\n/**\n * Check if a given file exists\n */\nasync function isAliveLocalFile(filePath) {\n  try {\n    // Remove query string and hash string\n    await fs.access(filePath.replace(/[?#].*?$/, ''))\n    return {\n      ok: true,\n      message: 'OK',\n    }\n  } catch (ex) {\n    return {\n      ok: false,\n      message: ex.message,\n    }\n  }\n}\n\nconst reporter = (context, options) => {\n  const { Syntax, getSource, report, RuleError, fixer, getFilePath, locator } = context\n  const helper = new RuleHelper(context)\n  const ruleOptions = { ...DEFAULT_OPTIONS, ...options }\n  // format preferGET list to ensure URI string is origin\n  ruleOptions.preferGET = ruleOptions.preferGET.map((origin) => getURLOrigin(origin))\n  const isAliveURI = createCheckAliveURL(ruleOptions)\n  // 30sec memorized\n  const memorizedIsAliveURI = pMemoize(isAliveURI, {\n    maxAge: 30 * 1000,\n  })\n\n  /**\n   * Checks a given URI's availability and report if it is dead.\n   * @param {TextLintNode} node TextLintNode the URI belongs to.\n   * @param {string} uri a URI string to be linted.\n   * @param {number} index column number the URI is located at.\n   * @param {number} maxRetryCount retry count of linting\n   */\n  const lint = async ({ node, uri, index }, maxRetryCount) => {\n    if (isIgnored(uri, ruleOptions.ignore)) {\n      return\n    }\n    const URIRange = [index, index + uri.length]\n    let newURI = uri\n    let result = null\n\n    if (isRelative(uri)) {\n      // Check if there is just no protocol ahead\n      if (checkProtocol(uri)) {\n        newURI = `https:${uri}`\n      } else {\n        if (!ruleOptions.checkRelative) {\n          return\n        }\n        const filePath = getFilePath()\n        // Treat relative uri as local file path if ruleOptions.baseURI is not provided\n        const base = ruleOptions.baseURI || filePath\n        if (!base) {\n          const message = 'Unable to resolve the relative URI. Please check if the options.baseURI is correctly specified.'\n          report(node, new RuleError(message, { padding: locator.range(URIRange) }))\n          return\n        }\n\n        newURI = joinPath([base, uri])\n      }\n    }\n\n    if (isLocal(newURI)) {\n      result = await isAliveLocalFile(newURI)\n    } else {\n      // Ignore non http external link\n      if (!isHttp(newURI)) {\n        return\n      }\n\n      // Determine request method\n      const method = ruleOptions.preferGET.includes(getURLOrigin(newURI)) ? 'GET' : 'HEAD'\n      result = await memorizedIsAliveURI(newURI, method, maxRetryCount)\n    }\n\n    const { ok, redirected, redirectTo, message } = result\n    // When ignoreRedirects is true, redirected should be ignored\n    if (redirected && ruleOptions.ignoreRedirects) {\n      return\n    }\n    if (!ok) {\n      const lintMessage = `${uri} is dead. (${message})`\n      report(node, new RuleError(lintMessage, { padding: locator.range(URIRange) }))\n    } else if (redirected) {\n      const lintMessage = `${uri} is redirected to ${redirectTo}. (${message})`\n      // Replace the old URI with redirected URI\n      const fix = redirectTo ? fixer.replaceTextRange(URIRange, redirectTo) : undefined\n      report(node, new RuleError(lintMessage, { fix, padding: locator.range(URIRange) }))\n    }\n  }\n\n  /**\n   * URIs to be checked.\n   */\n  const URIs = []\n\n  return {\n    [Syntax.Str](node) {\n      if (ruleOptions.ignoreStringLinks) {\n        return\n      }\n      if (helper.isChildNode(node, [Syntax.BlockQuote])) {\n        return\n      }\n\n      // prevent double checks\n      if (helper.isChildNode(node, [Syntax.Link])) {\n        return\n      }\n\n      // prevent double checks\n      if (helper.isChildNode(node, [Syntax.Image])) {\n        return\n      }\n\n      const text = getSource(node)\n\n      // Use `String#replace` instead of `RegExp#exec` to allow us\n      // perform RegExp matches in an iterate and immutable manner\n      const matches = text.matchAll(URI_REGEXP)\n      Array.from(matches).forEach((match) => {\n        const url = match[0]\n        if (url && match.input !== undefined && match.index !== undefined) {\n          URIs.push({ node, uri: url, index: match.index })\n        }\n      })\n    },\n\n    [Syntax.Link](node) {\n      if (helper.isChildNode(node, [Syntax.BlockQuote])) {\n        return\n      }\n\n      // Ignore HTML5 place holder link.\n      // Ex) <a>Placeholder Link</a>\n      if (typeof node.url === 'undefined') {\n        return\n      }\n\n      // [text](http://example.com)\n      //       ^\n      const index = node.raw.indexOf(node.url) || 0\n\n      URIs.push({\n        node,\n        uri: node.url,\n        index,\n      })\n    },\n\n    [Syntax.Image](node) {\n      if (helper.isChildNode(node, [Syntax.BlockQuote])) {\n        return\n      }\n\n      // ![img](http://example.com)\n      //       ^\n      const index = node.raw.indexOf(node.url) || 0\n\n      URIs.push({\n        node,\n        uri: node.url,\n        index,\n      })\n    },\n\n    // Reference links is markdown specific\n    Definition: function (node) {\n      if (!node.url) {\n        return\n      }\n\n      // Some link text[1]\n      //\n      // [1]: https://foo.bar\n      //      ^\n      const indexOfUrl = node.raw.indexOf(node.url)\n      const index = indexOfUrl !== -1 ? indexOfUrl : 0\n      URIs.push({\n        node,\n        uri: node.url,\n        index,\n      })\n    },\n\n    [Syntax.DocumentExit]() {\n      const queue = new PQueue({\n        concurrency: ruleOptions.concurrency,\n        intervalCap: ruleOptions.intervalCap,\n        interval: ruleOptions.interval,\n      })\n      const linkTasks = URIs.map((item) => () => lint(item, ruleOptions.retry))\n      return queue.addAll(linkTasks)\n    },\n  }\n}\nexport default {\n  linter: reporter,\n  fixer: reporter,\n}\n"],"mappings":"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"}